@using Orchard.Utility.Extensions;
@{
    if (Model.Title != null) {
        Layout.Title = Model.Title;
    }

    Model.Classes.Add("content-item");
    
    var contentTypeClassName = ((string)Model.ContentItem.ContentType).HtmlClassify();
    Model.Classes.Add(contentTypeClassName);
    Model.Classes.Add("user-summary");
    
    var tag = Tag(Model, "article");

    var profile = Model.ContentItem.AuthorPart;
    var imagePath = profile.Image.FirstMediaUrl ?? "http://www.lorempixel.com/200/200/people";
    var username = Model.ContentItem.UserPart.UserName;
    var displayName = profile.DisplayName.Value ?? username;
}
@tag.StartElement

<a href="@Url.Action("Index", new {username = username, Controller = "Home", Area = "Contrib.Profile"})" class="pull-left">
    <img src="@imagePath" class="img-responsive img-thumbnail img-author" width="100" height="100" />
</a>
<div class="pull-left" style="padding-left:5px;">
    <h3 class="media-heading">
        <a href="@Url.Action("Index", new {username = username, Controller = "Home", Area = "Contrib.Profile"})">
            @displayName
        </a>
    </h3>
    <div>
        @Display(Model.Summary)
    </div>
</div>

@tag.EndElement